dnl Process this file with autoconf to produce a configure script.
AC_INIT(src/main.cc)

dnl Need AC_PROG_MAKE_SET for recursive building
AC_PROG_MAKE_SET

dnl Generate a configuration header called <config.h> and put all the C
dnl preprocessor defines in there
AM_CONFIG_HEADER(config.h)

dnl Define this so that we can refer to it twice below
define(STAGE_VERSION,1.3)

dnl Initialize automake with name and version of package to be built. 
dnl PACKAGE and VERSION will be so defined in <config.h>.
AM_INIT_AUTOMAKE(stage,STAGE_VERSION)

dnl Change default installation prefix from /usr/local to user's home
AC_PREFIX_DEFAULT(${HOME}/stage-STAGE_VERSION)

dnl Checks for programs.
AC_PROG_CC
AC_PROG_CXX
AC_PROG_INSTALL
AC_PROG_RANLIB

dnl do we have zlib support?
AC_CHECK_LIB(z, gzopen)

dnl Checks for header files.
#AC_HEADER_STDC
#AC_HEADER_SYS_WAIT
#AC_CHECK_HEADERS(fcntl.h limits.h sys/file.h sys/time.h unistd.h)

dnl Checks for typedefs, structures, and compiler characteristics.
#AC_C_CONST
#AC_TYPE_OFF_T
#AC_TYPE_SIZE_T
#AC_HEADER_TIME

dnl Checks for library functions.
#AC_FUNC_MMAP
#AC_FUNC_SETPGRP
#AC_TYPE_SIGNAL
#AC_CHECK_FUNCS(getcwd gethostname gettimeofday mkdir rmdir select socket strcspn strdup strerror)

dnl where's player?
AC_ARG_WITH(player, [   --with-player=dir      Location of Player (installation or source)],
PLAYER_DIR=$with_player,
PLAYER_DIR="${HOME}/player-STAGE_VERSION")
AC_SUBST(PLAYER_DIR)

dnl where's the X11-style color database?
AC_ARG_WITH(color, [   --with-color=file      Location of X11-style color file],
CDB=$with_color, CDB="\"/usr/X11R6/lib/X11/rgb.txt\"")
AC_DEFINE_UNQUOTED(COLOR_DATABASE,$CDB,[the X11-style color database])

dnl include RTK GUI
AC_DEFINE(INCLUDE_RTK2,1,[include the RTK GUI])


AC_OUTPUT(Makefile src/Makefile rtk2/Makefile worlds/Makefile tools/Makefile)
